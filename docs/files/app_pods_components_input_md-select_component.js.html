<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>app/pods/components/input/md-select/component.js - mdeditor</title>
    <meta name="description" content="Small description for mdeditor goes here">
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="stylesheet" href="../assets/css/custom.css">
    <link rel="stylesheet" href="../assets/vendor/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="../assets/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../assets/css/theme.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700" rel="stylesheet" type="text/css">
    <link rel="shortcut icon" type="image/png" href="../assets/img/favicon.png">
    
</head>
<body>
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <div class="navbar-header">
          <a href="../" class="navbar-brand">
            <img src="../assets/img/mdeditor-logo.png" alt="">
            <span>API Docs</span>
          </a>
        </div>

        <div class="collapse navbar-collapse" id="nav">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="https://github.com/adiwg/mdEditor" class="fa fa-github github"></a></li>
          </ul>
        </div>
      </div>
    </nav>
    <div id="main-wrapper" class="row">
        <div id="content-wrapper">
            <ol class="panel-group" id="sidebar" role="tablist" aria-multiselectable="true">
                <li class="panel panel-default">
                    <div class="panel-heading" role="tab" id="sidebar-search-heading">
                        <h4 class="panel-title">
                      <a role="button" data-toggle="collapse" href="#sidebar-search" aria-expanded="true" aria-controls="collapseOne">
                        Search
                      </a>
                    </h4>
                    </div>
                    <div id="sidebar-search" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="sidebar-search-heading">
                        <div class="panel-body">
                            <div id="api-tabview-filter">
                                <input type="search" id="api-filter" placeholder="Search...">
                            </div>
                        </div>
                    </div>
                </li>
                    <li class="panel panel-default">
                        <div class="panel-heading" role="tab" id="sidebar-version-heading">
                            <h4 class="panel-title">
                                <a role="button" href="https://github.com/adiwg/mdEditor/commits/55944267" target="_blank">
                                  Tag: 0.7.0.55944267
                                </a>
                            </h4>
                        </div>
                    </li>
                <li class="panel panel-default">
                    <div class="panel-heading" role="tab" id="sidebar-modules-heading">
                        <h4 class="panel-title">
                    <a role="button" data-toggle="collapse" href="#sidebar-modules" aria-expanded="true" aria-controls="collapseOne">
                      Modules
                    </a>
                  </h4>
                    </div>
                    <div id="sidebar-modules" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="sidebar-modules-heading">
                        <div class="panel-body">
                                <ol>
                                        <li>
                                            <a href="../modules/ember-json-tree.html">ember-json-tree</a>
                                                    <li class="sub"><a href="../modules/tree-view.html">tree-view</a></li>
                                                    <li class="sub"><a href="../modules/tree-search.html">tree-search</a></li>
                                                    <li class="sub"><a href="../modules/helpers.html">helpers</a></li>
                                        </li>
                                        <li>
                                            <a href="../modules/mdeditor.html">mdeditor</a>
                                                    <li class="sub"><a href="../modules/mixins.html">mixins</a></li>
                                                    <li class="sub"><a href="../modules/data-models.html">data-models</a></li>
                                                    <li class="sub"><a href="../modules/components-control.html">components-control</a></li>
                                                    <li class="sub"><a href="../modules/components-input.html">components-input</a></li>
                                                    <li class="sub"><a href="../modules/components-layout.html">components-layout</a></li>
                                                    <li class="sub"><a href="../modules/components-object.html">components-object</a></li>
                                        </li>
                                </ol>
                        </div>
                    </div>
                </li>
            
                <li class="panel panel-default">
                    <div class="panel-heading" role="tab" id="sidebar-classes-heading">
                        <h4 class="panel-title">
                      <a role="button" data-toggle="collapse" href="#sidebar-classes" aria-expanded="true" aria-controls="collapseOne">
                        Classes
                      </a>
                    </h4>
                    </div>
                    <div id="sidebar-classes" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="sidebar-classes-heading">
                        <div class="panel-body">
                            <ol>
                                    <li>
                                        <a href="../classes/contact.html">contact</a>
                                    </li>
                                    <li>
                                        <a href="../classes/make-range.html">make-range</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-address.html">md-address</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-array-table.html">md-array-table</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-boolean.html">md-boolean</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-button-modal.html">md-button-modal</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-card.html">md-card</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-citation.html">md-citation</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-citation-array.html">md-citation-array</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-codelist.html">md-codelist</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-codelist-multi.html">md-codelist-multi</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-contact-link.html">md-contact-link</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-contact-title.html">md-contact-title</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-date-range.html">md-date-range</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-datetime.html">md-datetime</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-definition.html">md-definition</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-graphic-array.html">md-graphic-array</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-identifier-array.html">md-identifier-array</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-identifier-object-table.html">md-identifier-object-table</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-import-csv.html">md-import-csv</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-input.html">md-input</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-input-confirm.html">md-input-confirm</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-maintenance.html">md-maintenance</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-markdown-editor.html">md-markdown-editor</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-object-table.html">md-object-table</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-online-resource-array.html">md-online-resource-array</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-phone-array.html">md-phone-array</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-scroll-spy.html">md-scroll-spy</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-select.html">md-select</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-select-contacts.html">md-select-contacts</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-select-table.html">md-select-table</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-select-thesaurus.html">md-select-thesaurus</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-simple-array-table.html">md-simple-array-table</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-spotlight.html">md-spotlight</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-textarea.html">md-textarea</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-toggle.html">md-toggle</a>
                                    </li>
                                    <li>
                                        <a href="../classes/md-wrap.html">md-wrap</a>
                                    </li>
                                    <li>
                                        <a href="../classes/object-template.html">object-template</a>
                                    </li>
                                    <li>
                                        <a href="../classes/tree-branch.html">tree-branch</a>
                                    </li>
                                    <li>
                                        <a href="../classes/tree-label.html">tree-label</a>
                                    </li>
                                    <li>
                                        <a href="../classes/tree-leaf.html">tree-leaf</a>
                                    </li>
                                    <li>
                                        <a href="../classes/tree-search.html">tree-search</a>
                                    </li>
                                    <li>
                                        <a href="../classes/tree-view.html">tree-view</a>
                                    </li>
                            </ol>
                        </div>
                    </div>
                </li>
            </ol>
            <div class="content-container">
                <div class="apidocs">
                    <div id="docs-main">
                        <div class="content">
<div class="page-header">
    <h1><i class="fa fa-file-code-o" aria-hidden="true"></i>  File</h1>
</div>

<div class="file">
    <pre class="prettyprint linenums">
/**
 * @module mdeditor
 * @submodule components-input
 */

import { A } from &#x27;@ember/array&#x27;;

import { Promise } from &#x27;rsvp&#x27;;
import { inject as service } from &#x27;@ember/service&#x27;;
import { notEmpty, alias, not, and, or } from &#x27;@ember/object/computed&#x27;;
import Component from &#x27;@ember/component&#x27;;
import { computed, get, defineProperty } from &#x27;@ember/object&#x27;;
import { isBlank, isNone } from &#x27;@ember/utils&#x27;;
import { assert, debug } from &#x27;@ember/debug&#x27;;
import DS from &#x27;ember-data&#x27;;

export default Component.extend({
  /**
   * A select list control for displaying and selecting options
   * provided in an array or promise array.
   *
   * &#x60;&#x60;&#x60;handlebars
   * \{{input/md-select
   *  label=&quot;Measure Type&quot;
   *  showValidations=true
   *  model=this
   *  path=&quot;measureType&quot;
   *  valuePath=&quot;value&quot;
   *  namePath=&quot;name&quot;
   *  objectArray=typeOptions
   *  tooltip=true
   *  tooltipPath=&quot;tip&quot;
   *  searchEnabled=false
   *  disabled=measureDisabled
   *  placeholder=&quot;The type of measurement.&quot;
   *  profilePath=(concat profilePath &quot;.measure.type&quot;)
   * }}
   * &#x60;&#x60;&#x60;
   *
   * @class md-select
   * @constructor
   */

  init() {
    this._super(...arguments);

    let model = this.model;
    let path = this.path;

    if(isNone(model) !== isNone(path)) {
      assert(
        &#x60;You must supply both model and path to ${this.toString()} or neither.&#x60;
      );
    }

    if(!isBlank(model)) {
      if(this.get(&#x60;model.${path}&#x60;) === undefined) {
        debug(
          &#x60;model.${path} is undefined in ${this.toString()}.&#x60;
        );
        //Ember.run.once(()=&gt;model.set(path, &quot;&quot;));
      }

      defineProperty(this, &#x27;value&#x27;, alias(&#x60;model.${path}&#x60;));

      defineProperty(this, &#x27;validation&#x27;, alias(
        &#x60;model.validations.attrs.${path}&#x60;).readOnly());

      defineProperty(this, &#x27;required&#x27;, computed(
        &#x27;validation.options.presence.{presence,disabled}&#x27;,
        &#x27;disabled&#x27;,
        function() {
          return !this.disabled &amp;&amp;
            this.get(&#x27;validation.options.presence.presence&#x27;) &amp;&amp;
            !this.get(&#x27;validation.options.presence.disabled&#x27;);
        }).readOnly());

      defineProperty(this, &#x27;notValidating&#x27;, not(
        &#x27;validation.isValidating&#x27;).readOnly());

      defineProperty(this, &#x27;hasContent&#x27;, notEmpty(&#x27;value&#x27;).readOnly());

      defineProperty(this, &#x27;hasWarnings&#x27;, notEmpty(
        &#x27;validation.warnings&#x27;).readOnly());

      defineProperty(this, &#x27;isValid&#x27;, and(&#x27;hasContent&#x27;,
        &#x27;validation.isTruelyValid&#x27;).readOnly());

      defineProperty(this, &#x27;shouldDisplayValidations&#x27;, or(
        &#x27;showValidations&#x27;, &#x27;didValidate&#x27;,
        &#x27;hasContent&#x27;).readOnly());

      defineProperty(this, &#x27;showErrorClass&#x27;, and(&#x27;notValidating&#x27;,
        &#x27;showErrorMessage&#x27;,
        &#x27;hasContent&#x27;, &#x27;validation&#x27;).readOnly());

      defineProperty(this, &#x27;showErrorMessage&#x27;, and(
        &#x27;shouldDisplayValidations&#x27;,
        &#x27;validation.isInvalid&#x27;).readOnly());

      defineProperty(this, &#x27;showWarningMessage&#x27;, and(
        &#x27;shouldDisplayValidations&#x27;,
        &#x27;hasWarnings&#x27;, &#x27;isValid&#x27;).readOnly());
    }
  },

  classNames: [&#x27;md-select&#x27;],
  classNameBindings: [&#x27;formGroup&#x27;, &#x27;required&#x27;],
  attributeBindings: [&#x27;data-spy&#x27;],
  formGroup: notEmpty(&#x27;label&#x27;),
  icons: service(&#x27;icon&#x27;),

  /**
   * An array or promise array containing the options for the
   * select list.
   * At a minimum the array elements should provide attributes for the
   * name value pairs displayed as select list options.
   * Tooltips may also be included.
   * Other attributes in the array elements will be ignored.
   *
   * &#x60;&#x60;&#x60;javascript
   * {
   *   name: &#x27;displayed&#x27;,
   *   value: &#x27;option&#x27;,
   *   type: &#x27;xtra info&#x27;,
   *   tip: &#x27;tooltip&#x27;
   * }
   * &#x60;&#x60;&#x60;
   *
   * @property objectArray
   * @type Array
   * @required
   */

  /**
   * The initial value of the select. Type must match the type of the attribute
   * identified by the path option.
   *
   * @property value
   * @type Any
   * @required
   */
  value: null,

  /**
   * Path in the model to be used for the select list&#x27;s option value. Both
   * &#x60;model&#x60; and &#x60;path&#x60; must be supplied together.
   *
   * @property path
   * @type String
   */

  /**
   * The model to be used to compute the value alias, generally used for
   * validations. Both &#x60;model&#x60; and &#x60;path&#x60; must be supplied together.
   *
   * @property model
   * @type String
   */

  /**
   * Name of the attribute in the objectArray to be used for the
   * select list&#x27;s option value.
   *
   * @property valuePath
   * @type String
   * @required
   */

  /**
   * Name of the attribute in the objectArray to be used for the
   * select list&#x27;s option name or display text.
   *
   * @property namePath
   * @type String
   * @required
   */

  /**
   * Indicates if icons should be rendered.
   *
   * @property icon
   * @type Boolean
   * @default false
   */
  icon: false,

  /**
   * Indicates if value is required.
   *
   * @property required
   * @type Boolean
   * @default false
   */
  required: false,

  /**
   * The default icon.
   *
   * @property defaultIcon
   * @type {String}
   * @default defaultList
   * @required
   */
  defaultIcon: &#x27;defaultList&#x27;,

  /**
   * Indicates if tooltips should be rendered for the options.
   *
   * @property tooltip
   * @type Boolean
   * @default false
   */
  tooltip: false,

  /**
   * Name of the attribute in the objectArray to be used for the
   * select list&#x27;s tooltip.  If null, no tooltip will be
   * generated.
   *
   * @property tooltipPath
   * @type String
   * @default null
   */
  tooltipPath: null,

  /**
   * Whether to render a button to clear the selection.
   *
   * @property allowClear
   * @type Boolean
   * @default false
   */
  allowClear: false,

  /**
   * Whether to render the search input.
   *
   * @property searchEnabled
   * @type Boolean
   * @default true
   */
  searchEnabled: true,

  /**
   * Whether to disable the select.
   *
   * @property disabled
   * @type Boolean
   * @default false
   */
  disabled: false,

  /**
   * Whether to close the selection list after a selection has been made.
   *
   * @property closeOnSelect
   * @type Boolean
   * @default true
   */
  closeOnSelect: true,

  /**
   * The string to display when no option is selected.
   *
   * @property placeholder
   * @type String
   * @default &#x27;Select one option&#x27;
   */
  placeholder: &quot;Select one option&quot;,

  /**
   * Form label for select list
   *
   * @property label
   * @type String
   * @default null
   */
  label: null,

  ariaLabel: computed(&#x27;label&#x27;, function() {
    return this.label;
  }),

  /**
   * Indicates whether to allow the user to enter a new option
   * not contained in the select list.
   *
   * @property create
   * @type Boolean
   * @default false
   */
  create: false,

  /**
   * If set, removes the option with the specified id from the list. By default,
   * it will hide options with a null id.
   *
   * @property filterId
   * @type {String|Number|null}
   * @default null
   * @optional
   */
  filterId: null,

  /**
   * The component to render
   *
   * @property theComponent
   * @type Ember.computed
   * @return String
   */
  theComponent: computed(&#x27;create&#x27;, function() {
    return this.create ? &#x27;power-select-with-create&#x27; :
      &#x27;power-select&#x27;;
  }),

  /**
   * Callback after value is updated, usually an action is passed.
   *
   * @method change
   */
  change() {},

  /**
   * The currently selected item in the codelist
   *
   * @property selectedItem
   * @type Ember.computed
   * @return PromiseObject
   */
  selectedItem: computed(&#x27;value&#x27;, function() {
    let value = this.value;

    return DS.PromiseObject.create({
      promise: this.codelist
        .then(function(arr) {
          return arr.find((item) =&gt; {
            return item[&#x27;codeId&#x27;] === value;
          });
        })
    });
  }),

  /**
   * codelist is an array of code objects re-mapped from the input &#x27;objectArray&#x27;.
   * Values from the input object array are mapped according the path parameters
   * provided.
   *
   * @property codelist
   * @type Ember.computed
   * @return PromiseArray
   */
  codelist: computed(&#x27;objectArray&#x27;, function() {
    const objArray = this.objectArray;
    let inList = new Promise(function(resolve, reject) {
      // succeed
      resolve(objArray);
      // or reject
      reject(new Error(&#x27;Couldn\&#x27;t create a promise.&#x27;));
    });
    let codeId = this.valuePath;
    let codeName = this.namePath;
    let tooltip = this.tooltipPath;
    let icons = this.icons;
    let defaultIcon = this.defaultIcon;
    let outList = A();

    return DS.PromiseArray.create({
      promise: inList.then(function(arr) {
        arr.forEach(function(item) {
          let newObject = {
            codeId: get(item, codeId),
            codeName: get(item, codeName),
            tooltip: false,
            icon: icons.get(item[codeName].toString()) || icons.get(
              defaultIcon)
          };
          if(tooltip) {
            newObject.tooltip = get(item, tooltip);
          }
          outList.pushObject(newObject);
        });

        return outList;
      })
    });
  }),

  /**
   * Creates a new codelist entry. The codeId and codeName are both set to the
   * passed value.
   *
   * @method createCode
   * @param  {String} code The code
   * @return {Object}      Returns a new codelist object
   */
  createCode(code) {
    return {
      codeId: code,
      codeName: code,
      tooltip: false
    };
  },

  /**
   * Set the value on the select.
   *
   * @method setValue
   * @param {Object} selected The object with the value(codeName) to set.
   */
  setValue(selected) {
    let val = selected ? selected.codeId : null;
    this.set(&#x27;value&#x27;, val);
    this.change();
  },
  actions: {
    // do the binding to value
    setValue(selected) {
      this.setValue(selected);
    },
    create(selected) {
      let code = this.createCode(selected);

      this.codelist
        .pushObject(code);
      this.setValue(code);
    }
  }

});

    </pre>
</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="../assets/vendor/prettify/prettify-min.js"></script>
    <script>prettyPrint();</script>
    <script src="../assets/vendor/jquery/jquery.min.js"></script>
    <script src="../assets/vendor/jquery-ui/jquery-ui.min.js"></script>
    <script src="../assets/vendor/bootstrap/js/bootstrap.js"></script>
    <script src="../assets/vendor/github-slugger/slugger.js"></script>
    <script src="../assets/js/yuidoc-bootstrap.js"></script>
</body>
</html>
